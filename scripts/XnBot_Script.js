function xnConfig(){this.input_placeholder=function(){return"Your message"},this.maxWidth=function(){return"350"},this.color=function(){return"#f43a3c"},this.textColor=function(){return"#ffffff"},this.titleText=function(){return"PORT.hu"},this.apiUrl=function(){return"https://admin.xnbot.io"},this.getKey=function(){return"F55B1E92-0438B3C5-B3C5CDC7-CDC739C4-39C4ACB4CCE4-19"},this.getForm=function(){return 0},this.getFormData=function(t){return jQuery.parseJSON("{\"name\":null,\"text\":null,\"email\":null}")[t]},this.getInfoBar=function(){return 0},this.getInfoBarData=function(t){return jQuery.parseJSON("{\"text\":null,\"title\":null}")[t]},this.socketServer=function(){return"wss://admin.xnbot.io/chatsocket"},this.assistantName=function(){return"Mónika"},this.assistantImage=function(){return"data:image/jpeg;base64,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"},this.location_btn_title=function(){return"Send Location"},this.icon=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiAhcPFSO+2Pw0AAACJUlEQVRIx53SW2gOcBjH8Wdk7MA2RORYFK2IS3ZBbrRSkhvJbqQc4kIRKYdWyqkoUZIcrrAcIudDzsexUQ7tQitqJJaZQzt8XHiXd+822/s+d8/z+39/z/95/v+syDBkx4JYHq8yg4fYqA5Upw9PcsgvbbE0HbSXOa6DxgT+RW5P4Xwr1YAqqzxJGGzvGTzGTvVocdZM/d3DPZ81G9U9XKJCMxrsMS7CAPdxSxlO/h/tY2Hiqu+sVhARYYAHuCnPLZR0DQ+2wQdw2zy9E9UCD3FDrimo7AoudsAP/HbU1KR6gUe4JifCYZR1RLOUugI+KTesnVboMa7KiTDUL3Wy28N5lnkDXlqsX4p1oSe4/LduEzYnyyNt8wWtzpnVyVBFnuJSAs9W57eh/+RyTfhur/Gd7qRIJS7om8jLcCT5wF1QnjJTmzrQM5xvwyNUkrzckG+rn6gxtwM+yHOc+2euBHc69hntOLhhcju8CmeT76YC8zt//+keo8XBvwsyWDXO6NOuUbPato/V2T9Y5D2+WW+kFziVjEfYgbXxv5Brs0Y0oyIFz/NVo6LoLoxwDA3yUurLsL9bPHH4FNalDPhaq4k9NRjjpwbDkyqzcbmHeESELTiWlF9EaToGOWoxLZFN0OqtrDQMIsxHpV4REfZhRVp4RITrWBKhyHf18tM3KNbkk0JrsCttPCLCbuxVq8XYzAwKfASnM8IjIiwGMzI3yFLhRNf6H/I3GD8d/XhaAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTAyLTIzVDE1OjIxOjM1KzAxOjAwGf+UsAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wMi0yM1QxNToyMTozNSswMTowMGiiLAwAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC"},this.poweredByText=function(){return"{{POWEREDBY}}"}}function xnChatio(){var t=null;this.initChat=function(){this.insertChatToPage(),this.sendInit()},this.insertChatToPage=function(){var t=_xntemplate_.frame(),e=_xntemplate_.style();jQuery("body").append(e+t),"block"==_xntemplate_.getChatState()&&(jQuery(".chatplatform-messenger").css("display","block"),jQuery(".chatplatform-toggle").hide()),this.startTriggers()},this.sendInit=function(){jQuery.ajax({method:"POST",url:encodeURI(_xnconfig_.apiUrl()+"/api/chatInit"),crossDomain:!0,data:{token:_xnchatiouser_.getUser(),key:_xnconfig_.getKey()}}).done(function(t){1==t.response?_xnchatio_.loadForm():jQuery(".chatplatform-container").remove()})},this.start=function(){jQuery(".chatplatform-container .chatplatform-messenger .chatplatform-messanger-messages ul").html(""),this.addMessage(_xntemplate_.infobar()),this.addMessage(_xntemplate_.system("Kapcsolódás..."));try{t=new WebSocket(_xnconfig_.socketServer()),t.onopen=function(){jQuery(".chatplatform-container .chatplatform-messenger .chatplatform-messanger-messages ul").html(""),_xnchatio_.addMessage(_xntemplate_.infobar()),_xnchatio_.addMessage(_xntemplate_.system("Sikeres kapcsolódás!")),_xnchatiouser_.register()},t.onmessage=function(t){var e=jQuery.parseJSON(t.data);if("getHistory"==e.action)_xnchatio_.getHistory();else if("msg"==e.action){var a=_xnchatio_.processMessage(e);_xnchatio_.addMessage(a)}else if("location"==e.action){var a=_xnchatio_.processMessage(e);_xnchatio_.addMessage(a)}else if("card"==e.action){var a=_xnchatio_.processMessage(e);_xnchatio_.addMessage(a)}else if("postback"==e.action){var a=_xnchatio_.processMessage(e);_xnchatio_.addMessage(a)}else"bchat_extension"==e.action&&"close_webview"==e.type&&_xnchatio_.closeWebview()},t.onclose=function(){_xnchatio_.addMessage(_xntemplate_.system('A kapcsolat megszakadt! <br><br><a href="javascript:_xnchatio_.reconnect()">Újrakapcsolódás</a>')),setTimeout(function(){_xnchatio_.reconnect()},2e3)}}catch(t){jQuery(".chatplatform-container .chatplatform-messenger .chatplatform-messanger-messages ul").html(""),this.addMessage(_xntemplate_.infobar()),this.addMessage(_xntemplate_.system('Hiba a kapcsolodás során! <br><br><a href="javascript:_xnchatio_.reconnect()">Újrakapcsolódás</a>'))}},this.send=function(e){t.send(JSON.stringify(e))},this.reconnect=function(){jQuery(".chatplatform-container .chatplatform-messenger .chatplatform-messanger-messages ul").html(""),this.addMessage(_xntemplate_.infobar()),this.addMessage(_xntemplate_.system("Kapcsolódás...")),setTimeout(function(){_xnchatio_.start()},1e3)},this.loadForm=function(){"1"!=_xnconfig_.getForm()||_xnchatiouser_.realGetUser()&&_xnchatiouser_.getData("chatplatform_name")&&_xnchatiouser_.getData("chatplatform_email")?_xnchatiouser_.getData("chatplatform_started")?this.start():(jQuery(".chatplatform-messenger .chatplatform-messenger-input textarea").hide(),this.addMessage(_xntemplate_.start()),this.startTriggers()):(this.addMessage(_xntemplate_.system("A beszélgetés elkezdéséhez kérem adja meg az alábbi adatokat:")),this.addMessage(_xntemplate_.form()),jQuery(".chatplatform-messenger .chatplatform-messenger-input textarea").hide(),this.startTriggers())},this.addMessage=function(t){jQuery(".chatplatform-container .chatplatform-messenger .chatplatform-messanger-messages ul").append(t),_xnchatio_.scrollDown(),this.startTriggers()},this.sendMessage=function(t,e,a){_xnchatiouser_.realGetUser()&&_xnchatio_.send({action:e?e:"msg",payload:a?a:void 0,msg:t,user:"client",channel:_xnchatiouser_.getUser(),key:_xnconfig_.getKey()})},this.startTriggers=function(){jQuery(".chatplatform-toggle, .chatplatform-messanger-header").off(),jQuery(".chatplatform-toggle, .chatplatform-messanger-header").on("click",function(){_xntemplate_.toggleChat()}),jQuery(".chatplatform-messenger .chatplatform-btn").off(),"1"!=_xnconfig_.getForm()||_xnchatiouser_.realGetUser()&&_xnchatiouser_.getData("chatplatform_name")&&_xnchatiouser_.getData("chatplatform_email")||jQuery(".chatplatform-messenger .chatplatform-btn").on("click",function(){var t=jQuery("#chatplatform-form-name").val(),e=jQuery("#chatplatform-form-email").val(),a=jQuery("#chatplatform-form-text").val();return""==t||""==e||""==a?void alert("Minden adat kitöltése kötelező!"):(_xnchatiouser_.setData("chatplatform_name",t),_xnchatiouser_.setData("chatplatform_email",e),_xnchatiouser_.setData("chatplatform_text",a),_xnchatio_.start(),void jQuery(".chatplatform-messenger .chatplatform-messenger-input textarea").show())}),jQuery(".chatplatform-messenger .chatplatform-messanger-input-bg textarea").off(),jQuery(".chatplatform-messenger .chatplatform-messanger-input-bg textarea").on("keyup",function(t){if(13===t.keyCode){var e=jQuery(this).val();if(""==e||" "==e)return;_xnchatio_.send({action:"msg",msg:e,user:"client",channel:_xnchatiouser_.getUser(),key:_xnconfig_.getKey()}),jQuery(this).val("")}}),jQuery(".chatplatform-messenger .chatplatform-messanger-payload-btn").off(),jQuery(".chatplatform-messenger .chatplatform-messanger-payload-btn").on("click",function(){_xnchatio_.trigger(this)}),jQuery(".chatplatform-messenger .chatplatform-messanger-message-content").off(),jQuery(".chatplatform-messenger .chatplatform-messanger-message-content").on("click",function(){var t=jQuery(this).parent().parent().find(".chatplatform-messanger-time");"none"==jQuery(t[0]).css("display")?jQuery(t[0]).css("display","block"):jQuery(t[0]).css("display","none")}),jQuery(".chatplatform-startconversation-btn").off(),jQuery(".chatplatform-startconversation-btn").on("click",function(){_xnchatiouser_.setData("chatplatform_started","true"),_xnchatio_.start(),jQuery(".chatplatform-messenger .chatplatform-messenger-input textarea").show()}),jQuery(".chatplatform-messanger-card-btn").off(),jQuery(".chatplatform-messanger-card-btn").on("click",function(){var t=jQuery(this).data("type"),e=jQuery(this).data("payload");"postback"==t?_xnchatio_.sendMessage(jQuery(this).html(),t,e):"web_url"==t&&_xntemplate_.weburl(jQuery(this).html(),e)}),jQuery(".chatplatform-messanger-overlay").off(),jQuery(".chatplatform-messanger-overlay").on("click",function(){jQuery(this).remove()}),jQuery(".chatplatform-messanger-cards-btn-right").off(),jQuery(".chatplatform-messanger-cards-btn-right").on("click",function(){var t=jQuery(this).parent().data("current"),e=jQuery(this).parent().find(".chatplatform-messanger-card-item");if(e.length>t+1){jQuery(this).parent().find(".chatplatform-messanger-cards-horizontal").first().width((e.length+2)*(jQuery(e).first().width()+10));var a=(t+1)*(jQuery(e).first().width()+10)-30;jQuery(this).parent().find(".chatplatform-messanger-cards-container").first().animate({scrollLeft:a},350),jQuery(this).parent().data("current",t+1)}e.length==t+2&&jQuery(this).hide(),jQuery(this).parent().find(".chatplatform-messanger-cards-btn-left").show()}),jQuery(".chatplatform-messanger-cards-btn-left").off(),jQuery(".chatplatform-messanger-cards-btn-left").on("click",function(){var t=jQuery(this).parent().data("current"),e=jQuery(this).parent().find(".chatplatform-messanger-card-item");if(t-1>-1){jQuery(this).parent().find(".chatplatform-messanger-cards-horizontal").first().width((e.length+2)*(jQuery(e).first().width()+10));var a=(t-1)*(jQuery(e).first().width()+10)-30;jQuery(this).parent().find(".chatplatform-messanger-cards-container").first().animate({scrollLeft:a},350),jQuery(this).parent().data("current",t-1)}t-2==-1&&jQuery(this).hide(),jQuery(this).parent().find(".chatplatform-messanger-cards-btn-right").show()})},this.trigger=function(t){var e=jQuery(t).data("type"),a=jQuery(t).data("payload"),r=jQuery(t).data("title");if("postback"==e&&_xnchatio_.send({action:"msg",msg:a,user:"client",channel:_xnchatiouser_.getUser(),key:_xnconfig_.getKey()}),"location"==e&&(navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){_xnchatio_.send({action:"location",msg:{lat:t.coords.latitude,lon:t.coords.longitude},user:"client",channel:_xnchatiouser_.getUser(),key:_xnconfig_.getKey()})},function(t){2==t.code?alert("POSITION UNAVAILABLE"):1==t.code?alert("PERMISSION DENIED"):alert("TIMEOUT"),console.log(t)}):(console.log(error),alert("Geolocation is not supported by this browser."))),"web_url"==e){var s=jQuery(t).data("url");s||(s=jQuery(t).data("payload"));var e=jQuery(t).data("type");_xntemplate_.weburl(r,s,e)}},this.getHistory=function(){jQuery.ajax({method:"POST",url:encodeURI(_xnconfig_.apiUrl()+"/api/getHistory"),crossDomain:!0,data:{token:_xnchatiouser_.getUser(),key:_xnconfig_.getKey()}}).done(function(t){for(var e="",a=0;a<t.messages.length;a++)e+=_xnchatio_.processMessage(t.messages[a]);jQuery(".chatplatform-container .chatplatform-messenger .chatplatform-messanger-messages ul").html(""),_xnchatio_.addMessage(_xntemplate_.infobar()),jQuery(".chatplatform-container .chatplatform-messenger .chatplatform-messanger-messages ul").append(e),_xnchatio_.scrollDown(),_xnchatio_.scrollDown(),_xnchatio_.startTriggers()})},this.processMessage=function(t){if("msg"==t.action){var e="text";if(t.type&&(e=t.type),"text"==e){var a=t.user,r=t.msg,s=t.created_at;return _xntemplate_.text(a,r,s)}if("quick_replies"==e){var a=t.user,r=t.msg,n=t.quick_replies,s=t.created_at;return _xntemplate_.buttons(a,r,n,s)}if("buttons"==e){var a=t.user,r=t.msg,n=t.buttons,s=t.created_at;return _xntemplate_.buttons(a,r,n,s)}}else{if("location"==t.action){var a=t.user,r="Location Sended",s=t.created_at;return _xntemplate_.location(a,r,s)}if("card"==t.action)return _xntemplate_.cards(t.cards,s);if("postback"==t.action){var a=t.user,r=t.msg,s=t.created_at;return _xntemplate_.text(a,r,s)}}},this.scrollDown=function(){var t=jQuery(".chatplatform-container .chatplatform-messenger .chatplatform-messanger-body .chatplatform-messanger-message");t.length>0&&jQuery(".chatplatform-container .chatplatform-messenger .chatplatform-messanger-body").scrollTop(t[t.length-1].offsetTop-50)},this.closeWebview=function(){jQuery(".chatplatform-messanger-overlay").remove()}}function xnTemplate(){this.toggleChat=function(){"none"==jQuery(".chatplatform-messenger").css("display")?(jQuery(".chatplatform-messenger").css("display","block"),jQuery(".chatplatform-toggle").hide(),_xntemplate_.setChatState("block")):(jQuery(".chatplatform-messenger").css("display","none"),jQuery(".chatplatform-toggle").show(),_xntemplate_.setChatState("none"))},this.setChatState=function(t){_xnchatiouser_.setData("chatplatform_state",t)},this.getChatState=function(){return _xnchatiouser_.getData("chatplatform_state")?_xnchatiouser_.getData("chatplatform_state"):"none"},this.style=function(){var t="<style>.chatplatform-toggle { position: fixed; right: 10px; bottom: 10px; background: "+_xnconfig_.color()+"; border: 0; width: 60px; height: 60px; -moz-border-radius: 50%; border-radius: 50%; -webkit-border-radius: 50%; cursor: pointer; display: block } .chatplatform-toggle textarea, input, button { outline: none }.chatplatform-toggle textarea:focus { outline-color: transparent; outline-style: none }";return""!=_xnconfig_.assistantName()&&(t+=".chatplatform-messanger-messages { padding-bottom: 20px; }"),t+=".chatplatform-messenger { background: #fff; height: calc(100% - 20px - 75px - 20px); bottom: calc(20px); min-height: 200px; max-height: 500px; position: fixed; right: 20px;  width: "+_xnconfig_.maxWidth()+"px; box-shadow: 0 5px 40px rgba(0, 0, 0, .1);  border-radius: 10px; -moz-border-radius: 10px; -webkit-border-radius: 10px; overflow: hidden; font-family: sans-serif; z-index: 5001; display: none }.chatplatform-messenger-wrapper{ position: relative; height: 90%; min-height: 200px; max-height: 500px; z-index: 5001 }.chatplatform-messanger-header { padding: 15px 24px; background: "+_xnconfig_.color()+";  color: "+_xnconfig_.textColor()+"; cursor: pointer; font-weight: 400; padding-right: 40px; position: relative }.chatplatform-messanger-header .chatplatform-btn-minimalize{ position: absolute; right: 20px; bottom: 20px; width: 20px; height: 2px; background: #fff; margin-left: 20px }.chatplatform-messanger-body{ overflow-y: scroll; overflow-x: hidden; top: 200px; height: calc(100% - 75px) }.chatplatform-messanger-messages ul{ list-style: none; padding: 0;  margin: 0 0 20px 0 }.chatplatform-messanger-message { display: block;  overflow: auto; zoom: 1; margin-bottom: 0;  font-size: 14px; padding: 5px 20px }.chatplatform-messanger-message .chatplatform-messanger-message-content{ padding: 8px 20px; border-radius: 8px; -moz-border-radius: 8px; -webkit-border-radius: 8px; max-width: 80%; -webkit-box-sizing: border-box;-moz-box-sizing: border-box; box-sizing: border-box }.chatplatform-messanger-message .chatplatform-messanger-message-content{ float: left; display: block; background: #EBEBEB }.chatplatform-messanger-message .chatplatform-messanger-message-content img{ width: 100%; height: auto; cursor: pointer }.chatplatform-messanger-message .chatplatform-messanger-time{ text-align: left; font-size: 11px; padding-left: 10px; padding-right: 10px; padding-bottom: 10px; color: rgb(66, 66, 66); display: none }.chatplatform-messanger-message a{ color: "+_xnconfig_.color()+"; font-weight: bold; cursor: pointer; word-wrap: break-word }.chatplatform-messanger-message.cp-infobar{ padding: 0 }.chatplatform-messanger-message.cp-infobar .message-content-infos-title{ font-size: 16px; display: block }.chatplatform-messanger-message.cp-infobar span{ display: block }.chatplatform-messanger-message.cp-infobar .message-content-image{ float: left }.chatplatform-messanger-message.cp-infobar .message-content-infos{ float: left; padding-left: 20px }.chatplatform-messanger-message.cp-infobar .chatplatform-messanger-message-content{ max-width: 100%; float: none; border-radius: 0; -moz-border-radius: 0; -webkit-border-radius: 0; padding: 20px }.chatplatform-messanger-message.buttons button { width: calc(100% + 20px); margin-bottom: 2px; margin-left: -10px; margin-right: -10px; color: #000; background: #fff; padding: 5px 10px; font-size: 12px; border: 1px solid "+_xnconfig_.color()+"; border-radius: 4px; -moz-border-radius: 4px; -webkit-border-radius: 4px; cursor: pointer }.chatplatform-messanger-message.buttons button:active { color: #000; background: rgb(238, 238, 238) }.chatplatform-messanger-message.buttons button:active { color: #000 }.chatplatform-messanger-message.form .chatplatform-messanger-message-content{ max-width: 100%; float: none; background: none } .chatplatform-messanger-message.system .chatplatform-messanger-message-content{ max-width: 100%; border-radius: 0; -moz-border-radius: 0; -webkit-border-radius: 0; background: none; margin-bottom: 10px }.chatplatform-messanger-message .chatplatform-messanger-data-form{ margin-bottom: 10px; text-align: center }.chatplatform-messanger-message .chatplatform-messanger-data-form span{ display: inline-block; width: 100%; text-align: left }.chatplatform-messanger-message .chatplatform-messanger-data-form input{ width: 100%; border: 1px solid rgb(85, 85, 85); font-size: 15px; padding: 4px }.chatplatform-messanger-message .chatplatform-btn, .chatplatform-messanger-message .chatplatform-startconversation-btn{ padding: 10px 20px; background: "+_xnconfig_.color()+"; color: "+_xnconfig_.textColor()+";  border: 0; border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px; font-size: 16px; cursor: pointer }.chatplatform-messanger-message .chatplatform-startconversation-btn { margin-top: 30px }.chatplatform-messanger-message.client a{ color: "+_xnconfig_.textColor()+"; cursor: pointer; word-wrap: break-word }.chatplatform-messanger-message.client .chatplatform-messanger-time{ text-align: right }.chatplatform-messanger-message.client .chatplatform-messanger-time{ text-align: right }.chatplatform-messanger-message:last-child .chatplatform-messanger-time{ display: block }.chatplatform-messanger-message.client .chatplatform-messanger-message-content{ float: right; display: block; background: "+_xnconfig_.color()+"; color: "+_xnconfig_.textColor()+" }.chatplatform-messenger-input{ height: 75px !important; bottom: 20px; width: "+_xnconfig_.maxWidth()+"px; position: fixed; background: #EBEBEB; text-align: right; border-top: 2px solid #EBEBEB }.chatplatform-messanger-input-bg{ padding: 5px 10px;  background: #fff }.chatplatform-messenger-input textarea{ width: 100% !important;  border: 0; height: 35px !important; line-height: 16px !important; font-size: 14px !important; resize: none; overflow: auto; outline: none; background: none; color: #000 }.chatplatform-messenger-input textarea::-webkit-input-placeholder { color: #8b8b8b }.chatplatform-messenger-input textarea:-moz-placeholder { color: #8b8b8b }.chatplatform-messenger-input .chatplatform-logo{ color: #ff001c; font-size: 12px; float: right; margin-top: 8px; text-decoration: none; margin-right: 10px }.chatplatform-messenger-input .chatplatform-logo:hover{ color: #d3091f; cursor: pointer }.chatplatform-messenger-input .chatplatform-logo span{ color: #797979 }.chatplatform-messanger-message .clearfix, .chatplatform-messanger-header .clearfix { zoom: 1; clear: both }.chatplatform-messanger-header .clearfix:before, .chatplatform-messanger-header .clearfix:after, .chatplatform-messanger-message .clearfix:before,.chatplatform-messanger-message .clearfix:after { content: ''; display: table }.chatplatform-messanger-message .clearfix:after, chatplatform-messanger-header .clearfix:after { clear: both }.chatplatform-messanger-message-loadImage{ padding: 10px }.chatplatform-messanger-iframe-title{ padding: 10px; border-bottom: 1px solid #ccc; height: 18px; font-family: sans-serif; font-weight: bold }.chatplatform-messanger-iframe{ background: #fff; position: fixed; width: 100%; max-width: 320px; max-height: 500px; left: 0; right: 0; margin: auto; top: 0; bottom: 0 }.chatplatform-messanger-iframe-web{ width: 100%; height: calc(100% - 38px); border: 0 }.chatplatform-messanger-overlay{ position: fixed; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); left:0; top:0; z-index: 7000; }.chatplatform-toggle .chatplatform-toggle-image { width: 27px; height: 27px; margin-left: 17px; margin-top: 17px;background-image: url('"+_xnconfig_.icon()+"'); background-size: contain; background-repeat: no-repeat; }.chatplatform-container .chatplatform-messanger-header .chatplatform-messenger-assistant-left{ float: left; width: 50px; }.chatplatform-container .chatplatform-messanger-header .chatplatform-messenger-assistant-right{ float: left; max-width: calc(100% - 50px); }.chatplatform-container .chatplatform-messanger-header .chatplatform-messenger-assistant-padding{ padding-left: 5px }.chatplatform-container .chatplatform-messanger-header .chatplatform-messenger-assistant-name{ font-weight: bold; padding-bottom: 3px; }.chatplatform-container .chatplatform-messanger-header .chatplatform-messenger-assistant-title{ font-size: 15px; }.chatplatform-container .chatplatform-messanger-header .chatplatform-messenger-assistant .ass-img-{ width: 45px; height: 45px; -moz-border-radius: 6px; border-radius: 6px; -webkit-border-radius: 6px; }.chatplatform-messanger-messages .chatplatform-messanger-cards { position: relative !important; }.chatplatform-messanger-cards-container{ overflow: hidden; width: 100%; padding: 0; }.chatplatform-messanger-messages .chatplatform-messanger-cards .chatplatform-messanger-cards-horizontal{ width: 5000px }.chatplatform-messanger-messages .chatplatform-messanger-card { border: 1px solid #ccc; border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px;}.chatplatform-messanger-messages .chatplatform-messanger-card-item{ width: 280px !important; padding: 5px; float: left; }.chatplatform-messanger-messages .chatplatform-messanger-card .chatplatform-messanger-card-image { min-height: 180px; background: rgb(236, 236, 236); border-bottom: 1px solid #ccc; overflow: hidden; }.chatplatform-messanger-messages .chatplatform-messanger-card-image-sub { min-height: 180px; }.chatplatform-messanger-messages .chatplatform-messanger-card .chatplatform-messanger-card-title { padding: 7px; font-size: 15px; font-weight: bold }.chatplatform-messanger-messages .chatplatform-messanger-card .chatplatform-messanger-card-description { padding: 5px; font-size: 12px }.chatplatform-messanger-messages .chatplatform-messanger-card .chatplatform-messanger-card-btn{ width: 100%; padding: 5px; background: #fff; border:0; border-top: 1px solid #ccc; font-weight: bold; font-size: 13px; cursor: pointer; }.chatplatform-messanger-messages .chatplatform-messanger-cards-btn-left, .chatplatform-messanger-cards-btn-right{ position: absolute; top: calc(50% - 50px); background: "+_xnconfig_.color()+"; font-size: 20px; padding: 10px 5px; border: 0; color: "+_xnconfig_.textColor()+"; cursor: pointer; }.chatplatform-messanger-messages .chatplatform-messanger-cards-btn-left{left: 12px;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px;display: none; z-index:1;}.chatplatform-messanger-messages .chatplatform-messanger-cards-btn-right{right: 12px;-moz-border-radius: 4px;-webkit-border-radius: 4px;border-radius: 4px; z-index:1}.chatplatform-container .chatplatform-messanger-header .chatplatform-messenger-assistant-left{ float: left; width: 50px; }.chatplatform-container .chatplatform-messanger-header .chatplatform-messenger-assistant-right{ float: left; max-width: calc(100% - 50px); }.chatplatform-container .chatplatform-messanger-header .chatplatform-messenger-assistant-padding{ padding-left: 5px }.chatplatform-container .chatplatform-messanger-header .chatplatform-messenger-assistant-name{ font-weight: bold; padding-bottom: 3px; font-size: 15px; }.chatplatform-container .chatplatform-messanger-header .chatplatform-messenger-assistant .ass-img-{ width: 45px; height: 45px; -moz-border-radius: 6px; border-radius: 6px; -webkit-border-radius: 6px; }@media (max-width: 800px) {.chatplatform-messenger{ width: auto; left: 10px; right: 10px; height: 100%; bottom: 0; border-radius: 8px 8px 0 0; -moz-border-radius: 8px 8px 0 0; -webkit-border-radius: 8px 8px 0 0 } .chatplatform-messenger-input{ width: calc(100% - 20px) }.chatplatform-toggle { padding: 0; position: fixed; right: 10px; bottom: 10px; background: "+_xnconfig_.color()+"; border: 0; width: 60px; height: 60px; -moz-border-radius: 50%; border-radius: 50%; -webkit-border-radius: 50%; cursor: pointer; display: block } .chatplatform-toggle span { display: none } }@media (max-width: 350px) {.chatplatform-messanger-message.cp-infobar img{ display: none }}</style>"},this.frame=function(){return html='<div class="chatplatform-container"><div class="chatplatform-messenger"><div class="chatplatform-messenger-wrapper"><div class="chatplatform-messanger-header">',""!=_xnconfig_.assistantName()?(html+='<div id="assistant-header-preview"><div class="chatplatform-messenger-assistant"><div class="chatplatform-messenger-assistant-left"><img src="',""==_xnconfig_.assistantImage()?html+="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAsCAMAAADLhrFKAAABEVBMVEUAAABUX4BUX4BhbIpUX4BUX4BVYIFUX4BYYoNUX4BUX4CvtcNUX4CWnrBUX4BUX4BUX4BUX4BUX4Dn6+xUX4BUX4De4+ZVYIBVYIHIztZdaIe4vsqxt8Sxt8SYn7Ln6+yAiaBUX4BUX4BUX4BUX4BUX4BUX4Dn6+xUX4BUX4BUX4Dg5OfX3OBaZIW6wMucpLWLlKl6hJx9hp5UX4BUX4BUX4Dn6+zn6+xUX4Dn6+zh5uhUX4BUX4Dn6+zn6+zn6+zP1Nvn6+zDydLCx9Dn6+y9w82zucVUX4Boco6hqbltd5KaobNzfZeSmq7n6+zn6+zn6+zn6+ze4+bn6+zn6+xUX4Dn6+xUX4Dn6+zl6eri5ujkXs/RAAAAV3RSTlMA/PfWyHDvK+fk3dXNypFcVjokCAgD/PLr6N3Z2djPzcqWioN/YTEvHBQP/PTh0M/Ozsi/sKyfiGlnY01E+PHw7efk4+Hg2tbV0NDNy8nHvLRJIh4QDgS1RWATAAABqUlEQVQ4y43UZ1PCQBCA4Q2SUFSqNFEREETsjW7vvbsH//+HOBk5dpcEJs+3W97JHJe5gEOiVzHNVqy6ANP9RI+yOGTMlQOTy0TRh9Jc172slwyKqI6DUzyE7iKOjZsGTuLfkGkJpwjXeLpGP1ir+a1BP517mmExe3KUxvubSstbtI3RngM+ShWTo3lJt37UMpuKW8WR4dFVaPKshBw755SdpsI0eZFtH0nMbmNI5pXET9luD721GADYQI9tmc7WvZWbKPL1rJKySIwFsd1tNWYXmSqEkMyMt7MoTs3nuW0Bem5N0QbH2xXZZvhyT6Y3FjJRuOPLTJ+naXmtu3Ak1styB0KNro/j3w2CyFkAcRRuqd1D4RggZYlJMK3TS0O2FQCIyNGObg/k3Fe3b6a3tgi2YzHL08XkjATYEgafben2QbQR51fH2KWLeY8kVB+2Kb8ePZ4rZmkRtR5otdD/i7iiTtYmkGoWcZu/X1lHgAuEV/rK3XKwDNJnQU1w0oFxyab7gwvr4GL93VletH8pkHXjVJSvnSRMlvxovl3b2Vmh0f4CD5LfruM/VE7LoMFzbcUAAAAASUVORK5CYII=":html+=_xnconfig_.assistantImage(),html+='" class="ass-img-"></div><div class="chatplatform-messenger-assistant-right"><div class="chatplatform-messenger-assistant-padding"><div class="chatplatform-messenger-assistant-name">'+_xnconfig_.assistantName()+'</div><div class="chatplatform-messenger-assistant-title"> '+_xnconfig_.titleText()+' </div></div></div><div class="clearfix"></div></div><div class="clearfix"></div></div>'):html+='<div id="no-assistant-header-preview" style="display: none;"><span class="chatplatform-btn-minimalize"></span><span class="chatbox_header"> '+_xnconfig_.titleText()+" </span></div>",html+="\t</div>",html+='<div class="chatplatform-messanger-body"><div class="chatplatform-messanger-messages"><ul></ul></div></div><div class="chatplatform-messenger-input"><div class="chatplatform-messanger-input-bg"><textarea placeholder="'+_xnconfig_.input_placeholder()+'" resize="none"></textarea></div>'+_xnconfig_.poweredByText()+'</div></div></div><div class="chatplatform-toggle"><div class="chatplatform-toggle-image"></div></div></div>',html},this.randomString=function(t){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");t||(t=Math.floor(Math.random()*e.length));for(var a="",r=0;r<t;r++)a+=e[Math.floor(Math.random()*e.length)];return a},this.urlify=function(t){t=t.replace(" \n ","<br>");var e=/(((https?:\/\/)|(www\.))[^\s]+)/g;return t.replace(e,function(t,e,a){var r="www."==a?"http://"+t:t;return'<a href="'+r+'" target="_blank">'+t+"</a>"})},this.imageLoaded=function(t){jQuery("#"+t).show(),jQuery("#placeholder_"+t).remove(),_xnchatio_.scrollDown()},this.location=function(t,e,a){var r="";"client"==t&&(r=" client");var s='<li class="chatplatform-messanger-message'+r+'"><div class="clearfix"><div class="chatplatform-messanger-message-content">'+e+'</div></div><div class="chatplatform-messanger-time">'+this.timeConverter(a)+"</div></li>";return s},this.cards=function(t,e){var a='<li><div class="clearfix"><div class="chatplatform-messanger-cards dragscroll" data-current="0">';return t.length>1&&(a+='<button class="chatplatform-messanger-cards-btn-left"><</button><button class="chatplatform-messanger-cards-btn-right">></button>'),a+='<div class="chatplatform-messanger-cards-container"><div class="chatplatform-messanger-cards-horizontal">',t.forEach(function(t){a+='<div class="chatplatform-messanger-card-item"><div class="chatplatform-messanger-card">'+(t.image_url?'<div class="chatplatform-messanger-card-image" style="background: url(\''+t.image_url+"'); background-size: cover;\"></div>":"")+'<div class="chatplatform-messanger-card-title">'+t.title+'</div><div class="chatplatform-messanger-card-description">'+t.subtitle+"</div>",t.buttons&&t.buttons.forEach(function(t){a+='<button class="chatplatform-messanger-card-btn" data-type="'+t.type+'" data-payload="'+(t.payload?t.payload:t.url)+'">'+t.title+"</button>"}),a+="</div></div>"}),a+="</div></div></div></div></li>",_xnchatio_.startTriggers(),a},this.text=function(t,e,a){var r="";"client"==t&&(r=" client");var s='<li class="chatplatform-messanger-message'+r+'"><div class="clearfix"><div class="chatplatform-messanger-message-content">';if(e.search("img src=")>0){var n=this.randomString(20),o=e.replace("]",' id="XNCHATimage_'+n+'" onload="_xntemplate_.imageLoaded(\'XNCHATimage_'+n+'\')" style="display: none;"><div class="chatplatform-messanger-message-loadImage" id="placeholder_XNCHATimage_'+n+'"></div> ');o=o.replace("[img","<img"),e=o}else e=this.urlify(e);return s+=e,s+='</div></div><div class="chatplatform-messanger-time">'+this.timeConverter(a)+"</div></li>"},this.buttons=function(t,e,a,r){var s="";"client"==t&&(s=" client");for(var n='<li class="chatplatform-messanger-message buttons"><div class="clearfix"><div class="chatplatform-messanger-message-content">'+this.urlify(e)+"<br><br>",o=0;o<a.length;o++)n+='<button class="chatplatform-messanger-payload-btn" ',a[o].payload&&(n+='data-payload="'+a[o].payload+'" '),a[o].url&&(n+='data-url="'+a[o].url+'" '),n+='data-type="'+a[o].content_type+'" ',n+='data-title="'+a[o].title+'">'+("location"!=a[o].content_type?a[o].title:_xnconfig_.location_btn_title())+"</button>";return n+='</div></div><div class="chatplatform-messanger-time">'+this.timeConverter(r)+"</div></li>"},this.system=function(t){return'<li class="chatplatform-messanger-message system"><div class="chatplatform-messanger-message-content">'+t+"</div></li>"},this.infobar=function(){return 1!=_xnconfig_.getInfoBar()?"":'<li class="chatplatform-messanger-message cp-infobar"><div class="chatplatform-messanger-message-content clearfix"><div class="message-content-image"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAsCAMAAADLhrFKAAABEVBMVEUAAABUX4BUX4BhbIpUX4BUX4BVYIFUX4BYYoNUX4BUX4CvtcNUX4CWnrBUX4BUX4BUX4BUX4BUX4Dn6+xUX4BUX4De4+ZVYIBVYIHIztZdaIe4vsqxt8Sxt8SYn7Ln6+yAiaBUX4BUX4BUX4BUX4BUX4BUX4Dn6+xUX4BUX4BUX4Dg5OfX3OBaZIW6wMucpLWLlKl6hJx9hp5UX4BUX4BUX4Dn6+zn6+xUX4Dn6+zh5uhUX4BUX4Dn6+zn6+zn6+zP1Nvn6+zDydLCx9Dn6+y9w82zucVUX4Boco6hqbltd5KaobNzfZeSmq7n6+zn6+zn6+zn6+ze4+bn6+zn6+xUX4Dn6+xUX4Dn6+zl6eri5ujkXs/RAAAAV3RSTlMA/PfWyHDvK+fk3dXNypFcVjokCAgD/PLr6N3Z2djPzcqWioN/YTEvHBQP/PTh0M/Ozsi/sKyfiGlnY01E+PHw7efk4+Hg2tbV0NDNy8nHvLRJIh4QDgS1RWATAAABqUlEQVQ4y43UZ1PCQBCA4Q2SUFSqNFEREETsjW7vvbsH//+HOBk5dpcEJs+3W97JHJe5gEOiVzHNVqy6ANP9RI+yOGTMlQOTy0TRh9Jc172slwyKqI6DUzyE7iKOjZsGTuLfkGkJpwjXeLpGP1ir+a1BP517mmExe3KUxvubSstbtI3RngM+ShWTo3lJt37UMpuKW8WR4dFVaPKshBw755SdpsI0eZFtH0nMbmNI5pXET9luD721GADYQI9tmc7WvZWbKPL1rJKySIwFsd1tNWYXmSqEkMyMt7MoTs3nuW0Bem5N0QbH2xXZZvhyT6Y3FjJRuOPLTJ+naXmtu3Ak1styB0KNro/j3w2CyFkAcRRuqd1D4RggZYlJMK3TS0O2FQCIyNGObg/k3Fe3b6a3tgi2YzHL08XkjATYEgafben2QbQR51fH2KWLeY8kVB+2Kb8ePZ4rZmkRtR5otdD/i7iiTtYmkGoWcZu/X1lHgAuEV/rK3XKwDNJnQU1w0oFxyab7gwvr4GL93VletH8pkHXjVJSvnSRMlvxovl3b2Vmh0f4CD5LfruM/VE7LoMFzbcUAAAAASUVORK5CYII="></div><div class="message-content-infos"><span class="message-content-infos-title">'+_xnconfig_.getInfoBarData("title")+"</span><span>"+_xnconfig_.getInfoBarData("text")+"</span></div></div>"},this.start=function(){return'<li class="chatplatform-messanger-message form"><div class="chatplatform-messanger-message-content"><div class="chatplatform-messanger-data-form"><button class="chatplatform-startconversation-btn">Beszélgetés indítása</button></div></div>'},this.form=function(){return'<li class="chatplatform-messanger-message form"><div class="chatplatform-messanger-message-content"><div class="chatplatform-messanger-data-form"><span>'+_xnconfig_.getFormData("name")+'</span><input id="chatplatform-form-name"></div><div class="chatplatform-messanger-data-form"><span>'+_xnconfig_.getFormData("email")+'</span><input id="chatplatform-form-email"></div><div class="chatplatform-messanger-data-form"><span>'+_xnconfig_.getFormData("text")+'</span><input id="chatplatform-form-text"></div><div class="chatplatform-messanger-data-form"><button class="chatplatform-btn">Küldés</button></div></div>'},this.weburl=function(t,e,a){var r=e,s=e.split("?")[1];if(s){var n={},o=s.replace(/\+/gi," ").split("&");for(var i in o){
var c=o[i].split("=");n[unescape(c[0])]=unescape(c[1])}n.source="xnchat",n.u=_xnchatiouser_.getUser();var m=[];for(var l in n)n.hasOwnProperty(l)&&m.push(l+"="+n[l]);r+=e.split("?")[0]+"?"+m.join("&")}else r+="?_source=xnbot&u="+_xnchatiouser_.getUser();if(a&&"full"!=a&&"web_url"!=a){var h='<div id="chatplatform-messanger-overlay" class="chatplatform-messanger-overlay"><div class="chatplatform-messanger-iframe"><div class="chatplatform-messanger-iframe-title">'+t+'</div><iframe id="chatplatform-messanger-iframe-web" class="chatplatform-messanger-iframe-web" src="'+r+'"></iframe></div></div>';jQuery("body").append(h)}else{var g=window.open(r,"_blank");g.focus()}_xnchatio_.startTriggers()},this.timeConverter=function(t){if(Number.isInteger(t)){var e=new Date(1e3*t),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=e.getFullYear(),s=a[e.getMonth()],n=e.getDate(),o=e.getHours(),i=e.getMinutes(),c=e.getSeconds(),m;m=o<10?"0"+o:o,m+=":",m+=i<10?"0"+i:i}else var e=t.split(" "),m=e[1];return m}}function xnUser(){var t="chatplatform_",e=365,a=function(){return Math.random().toString(36).substr(2)};this.getUser=function(){var t=this.realGetUser();if(t)return t;var e=this.setUser();return e},this.realGetUser=function(){for(var e=t+"=",a=decodeURIComponent(document.cookie),r=a.split(";"),s=0;s<r.length;s++){for(var n=r[s];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return!1},this.setUser=function(){var r=new Date,s=a()+"-"+a()+"-"+_xnconfig_.getKey()+"-"+(new Date).getTime()+a()+a();r.setTime(r.getTime()+24*e*60*60*1e3);var n="expires="+r.toUTCString();return document.cookie=t+"="+s+";"+n+";path=/",s},this.getData=function(t){for(var t=t+"=",e=decodeURIComponent(document.cookie),a=e.split(";"),r=0;r<a.length;r++){for(var s=a[r];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return Base64.decode(s.substring(t.length,s.length))}return!1},this.setData=function(t,a){var r=new Date;r.setTime(r.getTime()+24*e*60*60*1e3);var s="expires="+r.toUTCString();return document.cookie=t+"="+Base64.encode(a)+";"+s+";path=/",a},this.register=function(){_xnchatio_.send({action:"newChannel",channel:_xnchatiouser_.getUser(),name:_xnchatiouser_.getData("chatplatform_name"),email:_xnchatiouser_.getData("chatplatform_email"),comment:_xnchatiouser_.getData("chatplatform_text"),key:_xnconfig_.getKey()})}}var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e="",a,r,s,n,o,i,c,m=0;for(t=Base64._utf8_encode(t);m<t.length;)a=t.charCodeAt(m++),r=t.charCodeAt(m++),s=t.charCodeAt(m++),n=a>>2,o=(3&a)<<4|r>>4,i=(15&r)<<2|s>>6,c=63&s,isNaN(r)?i=c=64:isNaN(s)&&(c=64),e=e+this._keyStr.charAt(n)+this._keyStr.charAt(o)+this._keyStr.charAt(i)+this._keyStr.charAt(c);return e},decode:function(t){var e="",a,r,s,n,o,i,c,m=0;for(t=t.replace(/[^A-Za-z0-9+\/=]/g,"");m<t.length;)n=this._keyStr.indexOf(t.charAt(m++)),o=this._keyStr.indexOf(t.charAt(m++)),i=this._keyStr.indexOf(t.charAt(m++)),c=this._keyStr.indexOf(t.charAt(m++)),a=n<<2|o>>4,r=(15&o)<<4|i>>2,s=(3&i)<<6|c,e+=String.fromCharCode(a),64!=i&&(e+=String.fromCharCode(r)),64!=c&&(e+=String.fromCharCode(s));return e=Base64._utf8_decode(e)},_utf8_encode:function(t){t=t.replace(/rn/g,"n");for(var e="",a=0;a<t.length;a++){var r=t.charCodeAt(a);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},_utf8_decode:function(t){for(var e="",a=0,r=c1=c2=0;a<t.length;)r=t.charCodeAt(a),r<128?(e+=String.fromCharCode(r),a++):r>191&&r<224?(c2=t.charCodeAt(a+1),e+=String.fromCharCode((31&r)<<6|63&c2),a+=2):(c2=t.charCodeAt(a+1),c3=t.charCodeAt(a+2),e+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),a+=3);return e}};if("undefined"==typeof jQuery)console.log("jquery");else{var _xnconfig_=new xnConfig,_xnchatio_=new xnChatio,_xntemplate_=new xnTemplate,_xnchatiouser_=new xnUser;jQuery(document).ready(function(){_xnchatio_.initChat()})}